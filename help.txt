---
`help.txt`
```text
========================================
PROJECT HELP & DOCUMENTATION
========================================

This file provides a detailed breakdown of the project structure, commands, and deployment steps.

----------------------------------------
PART 1: PROJECT FILE STRUCTURE
----------------------------------------

crud-automation-project/
├── backend/                  # FastAPI backend application
│   ├── app/                  # Main application package
│   │   ├── api/              # API layer (routes and dependencies)
│   │   ├── core/             # Configuration and core settings
│   │   ├── db/               # Database session management
│   │   ├── decorators/       # Reusable decorators (e.g., @transactional)
│   │   ├── models/           # SQLAlchemy ORM models
│   │   ├── repositories/     # Data access layer (CRUD logic)
│   │   ├── schemas/          # Pydantic data validation models
│   │   ├── services/         # Business logic layer
│   │   └── main.py           # FastAPI application entry point
│   ├── alembic/              # Alembic migration scripts for Postgres
│   ├── tests/                # Unit and integration tests
│   ├── alembic.ini           # Alembic configuration
│   ├── Dockerfile            # Dockerfile for building the backend image
│   ├── pyproject.toml        # Python project dependencies (Poetry)
│   └── requirements.txt      # Pinned dependencies for Docker build
├── frontend/                 # React frontend application
│   ├── src/                  # Source code for the React app
│   │   ├── api/              # Axios client for backend communication
│   │   ├── components/       # Reusable React components
│   │   ├── hooks/            # Custom React hooks (e.g., useUsers)
│   │   └── App.jsx           # Main application component
│   ├── Dockerfile            # Dockerfile for building the frontend image (optional)
│   └── package.json          # Node.js project dependencies
├── .env.example              # Example environment variables
├── docker-compose.yml        # Docker Compose for local development
├── help.txt                  # This help file
└── README.md                 # Project overview and quickstart guide

----------------------------------------
PART 2: LOCAL DEVELOPMENT COMMANDS
----------------------------------------

**1. Initial Setup**
   - Clone the repository.
   - `cp .env.example .env` and configure your environment variables.

**2. Running with Docker Compose (Postgres)**
   - This command starts the backend API and a Postgres database.
   - `docker-compose up --build -d`
   - API URL: http://localhost:8000
   - Swagger Docs: http://localhost:8000/docs

**3. Running Alembic Migrations (Postgres)**
   - Must be run after `docker-compose up` has started the containers.
   - First, find your backend container ID: `docker ps`
   - `docker exec <backend_container_id> alembic revision --autogenerate -m "Initial migration"`
   - `docker exec <backend_container_id> alembic upgrade head`

**4. Running with Local MongoDB**
   - Ensure your local MongoDB instance is running.
   - In `.env`, set `DB_TYPE=mongo`.
   - Start ONLY the backend service: `docker-compose up --build backend`
   - To verify the connection, use `mongosh`:
     - `mongosh`
     - `use crud_db`
     - `db.users.find()`

**5. Running the Frontend**
   - `cd frontend`
   - `npm install`
   - `npm run dev`
   - Frontend URL: http://localhost:5173

**6. Running Backend Tests**
   - `cd backend`
   - `poetry install` (if you haven't already)
   - `poetry run pytest`

----------------------------------------
PART 3: GCP DEPLOYMENT - STEP-BY-STEP
----------------------------------------

This guide deploys the backend to Cloud Run and uses a Cloud SQL for PostgreSQL instance.

**Step 0: Prerequisites**
   - A Google Cloud account with billing enabled.
   - `gcloud` CLI installed and authenticated (`gcloud auth login`, `gcloud auth application-default login`).
   - `gcloud config set project YOUR_PROJECT_ID`.

**Step 1: Enable Necessary APIs**
   - `gcloud services enable run.googleapis.com cloudbuild.googleapis.com sqladmin.googleapis.com secretmanager.googleapis.com artifactregistry.googleapis.com`

**Step 2: Create Artifact Registry for Docker Images**
   - `gcloud artifacts repositories create my-docker-repo --repository-format=docker --location=us-central1 --description="Docker repository"`

**Step 3: Create Cloud SQL (Postgres) Instance**
   - `gcloud sql instances create my-postgres-instance --database-version=POSTGRES_15 --region=us-central1 --cpu=1 --memory=4GiB`
   - This will generate a root password. **SAVE IT SECURELY.**
   - Set the root password (if you missed it): `gcloud sql users set-password postgres --instance=my-postgres-instance --prompt-for-password`
   - Create the application database: `gcloud sql databases create cruddb --instance=my-postgres-instance`
   - Get the **Instance Connection Name**: `gcloud sql instances describe my-postgres-instance --format='value(connectionName)'` (e.g., `your-project:us-central1:my-postgres-instance`). You will need this later.

**Step 4: Store Secrets in Secret Manager**
   - Create secrets for the database credentials.
   - `echo "my-secure-password" | gcloud secrets create DB_PASSWORD --data-file=-`
   - `echo "postgres" | gcloud secrets create DB_USER --data-file=-`
   - `echo "cruddb" | gcloud secrets create DB_NAME --data-file=-`
   - `echo "your-project:us-central1:my-postgres-instance" | gcloud secrets create DB_INSTANCE_CONNECTION_NAME --data-file=-`

**Step 5: Build and Push Docker Image**
   - `gcloud builds submit ./backend --tag us-central1-docker.pkg.dev/YOUR_PROJECT_ID/my-docker-repo/crud-api:latest`

**Step 6: Deploy Backend to Cloud Run**
   - This single command deploys the service, connects it to Cloud SQL, and injects the secrets as environment variables.
   - `gcloud run deploy crud-api-backend \
        --image us-central1-docker.pkg.dev/YOUR_PROJECT_ID/my-docker-repo/crud-api:latest \
        --platform managed \
        --region us-central1 \
        --allow-unauthenticated \
        --add-cloudsql-instances=your-project:us-central1:my-postgres-instance \
        --set-env-vars="DB_TYPE=postgres" \
        --update-secrets=POSTGRES_PASSWORD=DB_PASSWORD:latest,POSTGRES_USER=DB_USER:latest,POSTGRES_DB=DB_NAME:latest,POSTGRES_SERVER=/cloudsql/your-project:us-central1:my-postgres-instance \
        --service-account=YOUR_SERVICE_ACCOUNT_EMAIL`
    
    *NOTE:* The value for `POSTGRES_SERVER` is the path to the Unix socket that the Cloud SQL Auth Proxy provides inside the Cloud Run container environment. It MUST follow the format `/cloudsql/INSTANCE_CONNECTION_NAME`.

**Step 7: Run Database Migrations on Cloud Run**
   - After deploying, you can run one-off tasks like migrations.
   - Create a temporary job to run the alembic command:
   - `gcloud run jobs create migrate-db --image us-central1-docker.pkg.dev/YOUR_PROJECT_ID/my-docker-repo/crud-api:latest --command alembic --args "upgrade,head" --task-timeout 300 --region us-central1 --add-cloudsql-instances=your-project:us-central1:my-postgres-instance --update-secrets=POSTGRES_PASSWORD=DB_PASSWORD:latest,POSTGRES_USER=DB_USER:latest,POSTGRES_DB=DB_NAME:latest,POSTGRES_SERVER=/cloudsql/your-project:us-central1:my-postgres-instance`
   - `gcloud run jobs execute migrate-db --region us-central1 --wait`

**Step 8: Deploy Frontend**
   - The simplest way is to deploy the React app to Cloud Run as well.
   - First, edit `frontend/src/api/apiClient.js` and change `baseURL` to your backend's Cloud Run service URL.
   - Build the static files: `cd frontend && npm run build`
   - Create a simple `Dockerfile` in the `frontend` directory (if not already present).
   - `gcloud builds submit ./frontend --tag us-central1-docker.pkg.dev/YOUR_PROJECT_ID/my-docker-repo/crud-ui:latest`
   - `gcloud run deploy crud-api-frontend --image us-central1-docker.pkg.dev/YOUR_PROJECT_ID/my-docker-repo/crud-ui:latest --platform managed --region us-central1 --allow-unauthenticated`
   - Update your backend CORS settings in `.env` and redeploy the backend if needed.

**Step 9: Cleanup (Optional)**
   - To avoid ongoing charges, delete the resources you created.
   - `gcloud run services delete crud-api-backend`
   - `gcloud run services delete crud-api-frontend`
   - `gcloud sql instances delete my-postgres-instance`
   - `gcloud artifacts repositories delete my-docker-repo`
   - `gcloud secrets delete DB_PASSWORD` (and others)